{"version":3,"sources":["shared/context/auth-context.js","shared/components/UIElements/LoadingSpinner.js","shared/components/hooks/auth-hook.js","App.js","index.js"],"names":["AuthContext","createContext","isLoggedIn","username","userId","token","login","logout","LoadingSpinner","props","className","asOverlay","logoutTimer","Home","React","lazy","About","Team","Contact","Garments","Headquarters","Orders","ThisHQ","ThisOrder","ClientOrders","ClientCatalogue","ClientCart","ThisClientOrder","Authentication","App","routes","useState","setToken","tokenExpirationDate","setTokenExpirationDate","setUserId","setUsername","useCallback","uid","expirationDate","Date","getTime","localStorage","setItem","JSON","stringify","expiration","toISOString","getItem","removeItem","useEffect","remainingTime","setTimeout","clearTimeout","storedData","parse","useAuth","path","exact","to","component","Provider","value","fallback","ReactDOM","render","document","getElementById"],"mappings":"6GAAA,6CAEaA,EAAcC,wBAAc,CACrCC,YAAY,EACZC,SAAU,KACVC,OAAQ,KACRC,MAAO,KACPC,MAAO,aACPC,OAAQ,gB,gCCRZ,0BAYeC,IARQ,SAAAC,GACrB,OACE,yBAAKC,UAAS,UAAKD,EAAME,WAAa,6BACpC,yBAAKD,UAAU,qB,yHCLjBE,E,+ECWEC,EAAOC,IAAMC,MAAK,kBAAM,6EACxBC,EAASF,IAAMC,MAAK,kBAAM,6EAC1BE,EAAQH,IAAMC,MAAK,kBAAM,6EACzBG,EAAWJ,IAAMC,MAAK,kBAAM,6EAE5BI,EAAYL,IAAMC,MAAK,kBAAM,6EAC7BK,EAAgBN,IAAMC,MAAK,kBAAM,6EACjCM,EAAUP,IAAMC,MAAK,kBAAM,sEAC3BO,EAAUR,IAAMC,MAAK,kBAAM,6EAC3BQ,EAAaT,IAAMC,MAAK,kBAAM,sEAE9BS,EAAgBV,IAAMC,MAAK,kBAAM,sEACjCU,EAAmBX,IAAMC,MAAK,kBAAM,sEACpCW,EAAcZ,IAAMC,MAAK,kBAAM,6EAC/BY,EAAmBb,IAAMC,MAAK,kBAAM,sEAMpCa,EAAkBd,IAAMC,MAAK,kBAAM,6EAuH1Bc,EApHH,WAAO,IAGbC,EAHY,EDhCK,WAAO,IAAD,EACDC,oBAAS,GADR,mBACpB1B,EADoB,KACb2B,EADa,OAE2BD,qBAF3B,mBAEpBE,EAFoB,KAECC,EAFD,OAGCH,oBAAS,GAHV,mBAGpB3B,EAHoB,KAGZ+B,EAHY,OAIKJ,oBAAS,GAJd,mBAIpB5B,EAJoB,KAIViC,EAJU,KAMrB9B,EAAQ+B,uBAAY,SAACC,EAAKnC,EAAUE,EAAOkC,GAC/CP,EAAS3B,GACT8B,EAAUG,GACVF,EAAYjC,GACZ,IAAM8B,EAAsBM,GAAkB,IAAIC,MAAK,IAAIA,MAAOC,UAAY,MAC9EP,EAAuBD,GACvBS,aAAaC,QACX,WACAC,KAAKC,UAAU,CACbzC,OAAQkC,EACRnC,SAAUA,EACVE,MAAOA,EACPyC,WAAYb,EAAoBc,iBAG/BL,aAAaM,QAAQV,IACxBI,aAAaC,QAAQL,EAAKM,KAAKC,UAAU,OAE1C,IAEGtC,EAAS8B,uBAAY,WACzBL,EAAS,MACTE,EAAuB,MACvBC,EAAU,MACVC,EAAY,MACZM,aAAaO,WAAW,cACvB,IAwBH,OArBAC,qBAAU,WACR,GAAI7C,GAAS4B,EAAqB,CAChC,IAAMkB,EAAgBlB,EAAoBQ,WAAY,IAAID,MAAOC,UACjE7B,EAAcwC,WAAW7C,EAAQ4C,QAEjCE,aAAazC,KAEd,CAACP,EAAOE,EAAQ0B,IAGnBiB,qBAAU,WACR,IAAMI,EAAaV,KAAKW,MAAMb,aAAaM,QAAQ,aAEjDM,GACAA,EAAWjD,OACX,IAAImC,KAAKc,EAAWR,YAAc,IAAIN,MAEtClC,EAAMgD,EAAWlD,OAAQkD,EAAWnD,SAAUmD,EAAWjD,MAAO,IAAImC,KAAKc,EAAWR,eAErF,CAACxC,IAEG,CAAED,QAAQC,QAAOC,SAAQH,SAAQD,YCvBUqD,GAA3CnD,EADS,EACTA,MAAOC,EADE,EACFA,MAAOC,EADL,EACKA,OAAQH,EADb,EACaA,OAAQD,EADrB,EACqBA,SA+FrC,OA1FE2B,EADEzB,GAAsB,eAAbF,EAET,kBAAC,IAAD,KACG,kBAAC,IAAD,CAAOsD,KAAK,IAAIC,OAAK,GACpB,kBAAC7C,EAAD,OAEF,kBAAC,IAAD,CAAO4C,KAAK,SAASC,OAAK,GACxB,kBAAC1C,EAAD,OAEF,kBAAC,IAAD,CAAOyC,KAAK,QAASC,OAAK,GACxB,kBAACzC,EAAD,OAEF,kBAAC,IAAD,CAAOwC,KAAK,WAAWC,OAAK,GAC1B,kBAACxC,EAAD,OAGF,kBAAC,IAAD,CAAOuC,KAAK,gBAAgBC,OAAK,GAC/B,kBAACrC,EAAD,OAEF,kBAAC,IAAD,CAAOoC,KAAK,kBAAmBC,OAAK,GAClC,kBAACvC,EAAD,OAEF,kBAAC,IAAD,CAAOsC,KAAK,sBAAsBC,OAAK,GACrC,kBAACtC,EAAD,OAEF,kBAAC,IAAD,CAAOqC,KAAK,4BAA6BC,OAAK,GAC5C,kBAACpC,EAAD,OAEF,kBAAC,IAAD,CAAOmC,KAAK,qBAAqBC,OAAK,GACpC,kBAACnC,EAAD,QAKGlB,GAAsB,eAAbF,EAEhB,kBAAC,IAAD,KACA,kBAAC,IAAD,CAAOsD,KAAK,IAAIC,OAAK,GACnB,kBAAC7C,EAAD,OAEF,kBAAC,IAAD,CAAO4C,KAAK,SAASC,OAAK,GACxB,kBAAC1C,EAAD,OAEF,kBAAC,IAAD,CAAOyC,KAAK,QAAQC,OAAK,GACvB,kBAACzC,EAAD,OAEF,kBAAC,IAAD,CAAOwC,KAAK,WAAWC,OAAK,GAC1B,kBAACxC,EAAD,OAGF,kBAAC,IAAD,CAAOuC,KAAK,qBAAqBC,OAAK,GACpC,kBAACjC,EAAD,OAEF,kBAAC,IAAD,CAAOgC,KAAK,oBAAoBC,OAAK,GACnC,kBAAChC,EAAD,OAEF,kBAAC,IAAD,CAAO+B,KAAK,kBAAkBC,OAAK,GACjC,kBAAClC,EAAD,OAEF,kBAAC,IAAD,CAAOiC,KAAK,uBAAuBC,OAAK,GACtC,kBAAC/B,EAAD,OAIF,kBAAC,IAAD,CAAUgC,GAAG,IAAIC,UAAW/C,KAK5B,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO4C,KAAK,IAAIC,OAAK,GACnB,kBAAC7C,EAAD,OAEF,kBAAC,IAAD,CAAO4C,KAAK,SAASC,OAAK,GACxB,kBAAC1C,EAAD,OAEF,kBAAC,IAAD,CAAOyC,KAAK,QAAQC,OAAK,GACvB,kBAACzC,EAAD,OAEF,kBAAC,IAAD,CAAOwC,KAAK,WAAWC,OAAK,GAC1B,kBAACxC,EAAD,OAEF,kBAAC,IAAD,CAAOuC,KAAK,SAASC,OAAK,GACxB,kBAAC9B,EAAD,OAEF,kBAAC,IAAD,CAAU+B,GAAG,OAOjB,kBAAC,IAAYE,SAAb,CACEC,MAAO,CACL5D,aAAcG,EACdA,MAAOA,EACPD,OAAQA,EACRD,SAAUA,EACVG,MAAOA,EACPC,OAAQA,IAGV,kBAAC,IAAD,KACE,kBAAC,WAAD,CAAUwD,SAAU,yBAAKrD,UAAU,UAAS,kBAACF,EAAA,EAAD,QACzCsB,MC3IXkC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.91e55bf6.chunk.js","sourcesContent":["import {createContext} from 'react';\r\n\r\nexport const AuthContext = createContext({\r\n    isLoggedIn: false, \r\n    username: null,\r\n    userId: null,\r\n    token: null,\r\n    login: () => {}, \r\n    logout: () => {} \r\n});","import React from 'react';\r\n\r\nimport './LoadingSpinner.css';\r\n\r\nconst LoadingSpinner = props => {\r\n  return (\r\n    <div className={`${props.asOverlay && 'loading-spinner__overlay'}`}>\r\n      <div className=\"lds-dual-ring\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoadingSpinner;\r\n","import { useState, useCallback, useEffect } from 'react';\r\n\r\nlet logoutTimer;\r\n\r\nexport const useAuth = () => {\r\n  const [token, setToken] = useState(false);\r\n  const [tokenExpirationDate, setTokenExpirationDate] = useState();\r\n  const [userId, setUserId] = useState(false);\r\n  const [username, setUsername] = useState(false);\r\n\r\n  const login = useCallback((uid, username, token, expirationDate) => {\r\n    setToken(token);\r\n    setUserId(uid);\r\n    setUsername(username);\r\n    const tokenExpirationDate = expirationDate || new Date(new Date().getTime() + 1000 * 60 * 60);\r\n    setTokenExpirationDate(tokenExpirationDate);\r\n    localStorage.setItem(\r\n      'userData', \r\n      JSON.stringify({\r\n        userId: uid,\r\n        username: username,\r\n        token: token, \r\n        expiration: tokenExpirationDate.toISOString()\r\n      })\r\n    )\r\n    if (!localStorage.getItem(uid)) {\r\n      localStorage.setItem(uid, JSON.stringify([]))\r\n    }\r\n  }, []);\r\n\r\n  const logout = useCallback(() => {\r\n    setToken(null);\r\n    setTokenExpirationDate(null);\r\n    setUserId(null);\r\n    setUsername(null);\r\n    localStorage.removeItem('userData');\r\n  }, []);\r\n\r\n\r\n  useEffect(() => {\r\n    if (token && tokenExpirationDate) {\r\n      const remainingTime = tokenExpirationDate.getTime() - new Date().getTime();\r\n      logoutTimer = setTimeout(logout, remainingTime )\r\n    } else {\r\n      clearTimeout(logoutTimer);\r\n    }\r\n  }, [token, logout, tokenExpirationDate])\r\n\r\n\r\n  useEffect(() => {\r\n    const storedData = JSON.parse(localStorage.getItem('userData'));\r\n    if (\r\n      storedData && \r\n      storedData.token && \r\n      new Date(storedData.expiration) > new Date() \r\n    ) {\r\n      login(storedData.userId, storedData.username, storedData.token, new Date(storedData.expiration));\r\n    }\r\n  }, [login])\r\n\r\n  return { token,  login, logout, userId, username,  };\r\n};","import React, {Suspense} from 'react';\r\nimport { \r\n  BrowserRouter as Router, \r\n  Route, \r\n  Redirect, \r\n  Switch \r\n} from 'react-router-dom';\r\n\r\n\r\nimport { AuthContext } from './shared/context/auth-context';\r\nimport { useAuth } from './shared/components/hooks/auth-hook';\r\nimport LoadingSpinner from './shared/components/UIElements/LoadingSpinner';\r\n\r\nconst Home = React.lazy(() => import('./shared/pages/Home'));\r\nconst About =  React.lazy(() => import('./shared/pages/About'));\r\nconst Team =  React.lazy(() => import('./shared/pages/Team'));\r\nconst Contact =  React.lazy(() => import('./shared/pages/Contact'));\r\n\r\nconst Garments =  React.lazy(() => import('./admin/pages/Garments'));\r\nconst Headquarters =  React.lazy(() => import('./admin/pages/Headquarters'));\r\nconst Orders =  React.lazy(() => import('./admin/pages/Orders'));\r\nconst ThisHQ =  React.lazy(() => import('./admin/pages/ThisHQ'));\r\nconst ThisOrder =  React.lazy(() => import('./admin/pages/ThisOrder'));\r\n\r\nconst ClientOrders =  React.lazy(() => import('./clients/pages/ClientOrders'));\r\nconst ClientCatalogue =  React.lazy(() => import('./clients/pages/ClientCatalogue'));\r\nconst ClientCart =  React.lazy(() => import('./clients/pages/ClientCart'));\r\nconst ThisClientOrder =  React.lazy(() => import('./clients/pages/ThisClientOrder'));\r\n// import ClientOrders from './clients/pages/ClientOrders'\r\n// import ClientCatalogue from './clients/pages/ClientOrders'\r\n// import ClientCart from './clients/pages/ClientOrders'\r\n// import ThisClientOrder from './clients/pages/ClientOrders'\r\n\r\nconst Authentication =  React.lazy(() => import('./shared/pages/Authentication'));\r\n\r\n\r\nconst App = () => {\r\n  const {token, login, logout, userId, username,} = useAuth();\r\n\r\n  let routes;\r\n\r\n  if (token && username === \"adminstaff\") {\r\n    routes = (\r\n      <Switch>\r\n         <Route path=\"/\" exact> \r\n          <Home />\r\n        </Route>\r\n        <Route path=\"/about\" exact> \r\n          <About />\r\n        </Route>\r\n        <Route path=\"/team\"  exact> \r\n          <Team />\r\n        </Route>\r\n        <Route path=\"/contact\" exact> \r\n          <Contact />\r\n        </Route>\r\n\r\n        <Route path=\"/admin/orders\" exact> \r\n          <Orders />\r\n        </Route>\r\n        <Route path=\"/admin/garments\"  exact> \r\n          <Garments />\r\n        </Route>\r\n        <Route path=\"/admin/headquarters\" exact> \r\n          <Headquarters />\r\n        </Route>\r\n        <Route path=\"/admin/headquarters/:hqId\"  exact> \r\n          <ThisHQ />\r\n        </Route>\r\n        <Route path=\"/admin/orders/:oid\" exact> \r\n          <ThisOrder />\r\n        </Route>\r\n\r\n      </Switch>\r\n    );  \r\n  } else if (token && username !== \"adminstaff\") {\r\n    routes = (\r\n      <Switch>\r\n      <Route path=\"/\" exact> \r\n        <Home />\r\n      </Route>\r\n      <Route path=\"/about\" exact> \r\n        <About />\r\n      </Route>\r\n      <Route path=\"/team\" exact> \r\n        <Team />\r\n      </Route>\r\n      <Route path=\"/contact\" exact> \r\n        <Contact />\r\n      </Route>\r\n\r\n      <Route path=\"/:userId/catalogue\" exact> \r\n        <ClientCatalogue />\r\n      </Route>\r\n      <Route path=\"/:userId/checkout\" exact> \r\n        <ClientCart />\r\n      </Route>\r\n      <Route path=\"/:userId/orders\" exact> \r\n        <ClientOrders />\r\n      </Route>\r\n      <Route path=\"/:userId/orders/:oid\" exact> \r\n        <ThisClientOrder />\r\n      </Route>\r\n\r\n\r\n      <Redirect to=\"/\" component={Home} />\r\n    </Switch>\r\n    );  \r\n  } else {\r\n    routes = (\r\n      <Switch>\r\n        <Route path=\"/\" exact> \r\n          <Home />\r\n        </Route>\r\n        <Route path=\"/about\" exact> \r\n          <About />\r\n        </Route>\r\n        <Route path=\"/team\" exact> \r\n          <Team />\r\n        </Route>\r\n        <Route path=\"/contact\" exact> \r\n          <Contact />\r\n        </Route>\r\n        <Route path=\"/login\" exact> \r\n          <Authentication />\r\n        </Route>\r\n        <Redirect to=\"/\" />\r\n    </Switch>\r\n    );\r\n  }\r\n\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        isLoggedIn: !!token,\r\n        token: token,\r\n        userId: userId,\r\n        username: username,\r\n        login: login, \r\n        logout: logout\r\n      }}\r\n    >\r\n      <Router>\r\n        <Suspense fallback={<div className=\"center\"><LoadingSpinner/></div>}>\r\n          {routes}\r\n        </Suspense>\r\n      </Router>\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}